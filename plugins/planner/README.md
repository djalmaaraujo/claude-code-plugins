# Planner Plugin for Claude Code

Sub-agent-based plan execution system with automatic dependency resolution, parallelism, and safety checks.

## Features

- ✅ **Plan creation** - Break down complex features into manageable plans
- ✅ **Dependency resolution** - Automatic ordering based on plan dependencies
- ✅ **Parallel execution** - Run independent plans simultaneously
- ✅ **Progress tracking** - PROGRESS.md tracks all plan statuses
- ✅ **Safety checks** - Validates dependencies before execution
- ✅ **Configuration options** - Auto-commit, CLAUDE.md updates, and more

## Quick Start

### 1. Initialize Planner

```
/planner:planner-setup
```

This creates the `plans/` directory and `PROGRESS.md` tracking file.

### 2. Create Plans

```
/planner:planner-create Add user authentication feature
```

This breaks down the feature into multiple plan files with proper dependencies.

### 3. Check Status

```
/planner:planner-status
```

Shows progress bar, completed plans, in-progress plans, and suggested next actions.

### 4. Execute Plans

**Single plan:**
```
/planner:planner-exec plans/001-setup-database.md
```

**All plans (with dependency resolution):**
```
/planner:planner-batch
```

## Available Slash Commands

| Command | Description |
|---------|-------------|
| `/planner:planner-setup` | Initialize planner in a project |
| `/planner:planner-create` | Create plan files for a feature |
| `/planner:planner-status` | Show overview of all plans |
| `/planner:planner-exec` | Execute a single plan file |
| `/planner:planner-batch` | Execute multiple plans with dependency resolution |
| `/planner:planner-eject-template` | Export plan template for customization |

## Directory Structure

After setup, your project will have:

```
project/
├── plans/
│   ├── PROGRESS.md           # Status tracking
│   ├── planner.config.json   # Configuration
│   ├── 001-first-plan.md     # Plan files
│   ├── 002-second-plan.md
│   └── ...
```

## Plan File Format

Each plan file includes:

```markdown
# Configuration

depends_on: none
linear_project:
linear_issue:

# Plan: 001-feature-name

## Objective
What this plan accomplishes and the expected outcome.

## Context
Relevant context from the codebase, patterns to follow.

## Implementation Steps
### Step 1: First step
Detailed instructions...

### Step 2: Second step
Continue with additional steps...

## Files to Modify
| File | Action | Description |
|------|--------|-------------|
| src/file.ts | CREATE | New file description |

## Testing Instructions
1. Verify step 1
2. Verify step 2

## Completion Checklist
- [ ] All implementation steps completed
- [ ] Tests pass
- [ ] No linting errors
```

### Configuration Fields

- **depends_on**: Plan dependencies (e.g., `none`, `001-setup`, `001-setup, 002-models`)
- **linear_project**: Optional Linear project association
- **linear_issue**: Optional Linear issue link

## Configuration

`plans/planner.config.json`:

```json
{
  "auto_commit": false,
  "auto_update_claude_md": false,
  "smart_parallelism": true
}
```

- **auto_commit**: Automatically commit after each plan
- **auto_update_claude_md**: Update project CLAUDE.md with changes
- **smart_parallelism**: Run independent plans in parallel

## Template Customization

Customize how plans are generated by ejecting the default template:

```
/planner:planner-eject-template plan
```

This creates:
- `plans/task.TEMPLATE.md` - Main plan template with `{{PLACEHOLDER}}` syntax
- `plans/standards/` - Convention files referenced by plans

The template uses `{{PLACEHOLDER}}` syntax that the plan-creator agent replaces with actual content. Edit the ejected template to match your project's conventions.

### Placeholder Reference

| Placeholder | Description |
|-------------|-------------|
| `{{DEPENDENCIES}}` | Plan dependencies |
| `{{PLAN_FILENAME}}` | The plan's filename |
| `{{OBJECTIVE_DESCRIPTION}}` | What the plan accomplishes |
| `{{STEP_TITLE}}` | Title for each step |
| `{{STEP_DETAILS}}` | Detailed instructions |
| `{{FILE_PATH}}` | Path to file being modified |

## License

MIT

## Author

Djalma Araujo
